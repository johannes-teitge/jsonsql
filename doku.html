<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JsonSQL Dokumentation</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" type="image/webp" href="https://teitge.de/JsonSQL/assets/images/JsonSQL-Logo.webp">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>  
  
<!-- Beispiel: GitHub Style -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">


  <style>
    body {
      padding-bottom: 4rem;
      color:rgb(119, 119, 119);
    }
    pre {
      background: #0b5aa0;
      padding: 1rem;
      border-radius: 5px;
      overflow-x: auto;
      margin-top: -5px;
      border:0 !important;
      padding:4px;
      transition: all 0.3s ease-in-out;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.112);      
    }

    .hljs {   
      background: #f6fbff;
    }

    .code-block {
      margin-bottom: 2rem;
    }
    .logo {
      max-height: 80px;
    }

    .mb-4 h1 {
      color:rgb(71, 71, 71);
      margin-bottom: 0 !important;
      padding-bottom: 0 !important;
    }

    h2 {
      color:rgb(19, 102, 165);      
    }    


  </style>
</head>
<body>
  <div class="container py-4">
    <div class="text-center mb-4">
      <img src="https://teitge.de/JsonSQL/assets/images/JsonSQL-Logo.webp" alt="JsonSQL Logo" class="logo">
      <h1 class="mb-4">JsonSQL â€“ Dokumentation</h1>
      <p class="lead">LeistungsfÃ¤higer SQL-Ã¤hnlicher JSON-Datenbank-Handler in PHP</p>      
    </div>



    <h2 class="mt-5">ğŸ”§ Initialisierung</h2>
    <p>Du initialisierst JsonSQL mit einem Alias-Array fÃ¼r deine Datenbankverzeichnisse:</p>
    <pre><code class="language-php">$db = new JsonSQL(['main' => __DIR__ . '/testdb']);
$db->use('main')->from('users');</code></pre>

    <h2 class="mt-4">ğŸ“„ SELECT</h2>
    <p>Spalten auswÃ¤hlen:</p>
    <pre><code class="language-php">$db->select('id,name,email');
// oder alle: $db->select('*');</code></pre>

    <h2 class="mt-4">ğŸ” WHERE</h2>
    <p>Filterbedingungen mit Operatoren:</p>
    <pre><code class="language-php">$db->where([
  ['age', '>=', 18],
  ['name', 'like', 'Peter']
], 'AND');</code></pre>

    <div class="code-block">
      <h5>ğŸ§  Hinweis zu mehrfachen where()-Aufrufen</h5>
      <p><code>where()</code> Ã¼berschreibt vorherige Filter. FÃ¼r mehrere Bedingungen nutze ein Array mit <code>AND</code> oder <code>OR</code>:</p>
      <pre><code class="language-php">// Richtig:
$db->where([
  ['city', '==', 'Berlin'],
  ['active', '==', true]
], 'AND');

// Nicht empfohlen:
$db->where(...)->where(...); // Ã¼berschreibt</code></pre>
    </div>

    <h2 class="mt-4">ğŸ” JOINs</h2>
    <p>UnterstÃ¼tzt INNER, LEFT, RIGHT, FULL OUTER:</p>
    <pre><code class="language-php">$db->join('orders', 'user_id', 'LEFT');</code></pre>

    <h2 class="mt-4">â†•ï¸ ORDER BY</h2>
    <pre><code class="language-php">$db->orderBy('name', 'ASC');</code></pre>

    <h2 class="mt-4">ğŸ“ LIMIT & OFFSET</h2>
    <pre><code class="language-php">$db->limit(10, 5); // 10 Ergebnisse ab Index 5</code></pre>

    <h2 class="mt-4">ğŸ¯ GET</h2>
    <pre><code class="language-php">$ergebnisse = $db->get();</code></pre>

    <h2 class="mt-4">â• INSERT</h2>
    <pre><code class="language-php">$db->insert([
  'id' => 101,
  'name' => 'Lisa',
  'email' => 'lisa@example.com'
]);</code></pre>

    <h2 class="mt-4">ğŸ“ UPDATE</h2>
    <pre><code class="language-php">$db->where([['id', '==', 101]])
   ->update(['email' => 'neu@example.com']);</code></pre>

    <h2 class="mt-4">ğŸ—‘ï¸ DELETE</h2>
    <pre><code class="language-php">$db->where([['id', '==', 101]])->delete();</code></pre>

    <h2 class="mt-4">ğŸ“Š GROUP BY & Aggregate</h2>
    <pre><code class="language-php">$db->groupBy('city');
$summe = $db->sum('umsatz');
$avg   = $db->avg('score');
$min   = $db->min('alter');
$max   = $db->max('punkte');</code></pre>

    <h2 class="mt-4">âš–ï¸ HAVING</h2>
    <pre><code class="language-php">$db->groupBy('region')->having(fn($gruppe) => count($gruppe) > 3);</code></pre>

    <h2 class="mt-4">âœ… EXISTS & FIRST</h2>
    <pre><code class="language-php">$exists = $db->where([['active', '==', true]])->exists();
$erste = $db->where([['city', '==', 'Berlin']])->first();</code></pre>

    <h2 class="mt-4">ğŸ” PLUCK</h2>
    <pre><code class="language-php">$emails = $db->pluck('email');</code></pre>

    <h2 class="mt-4">ğŸ“š PAGINATE</h2>
    <pre><code class="language-php">$seite2 = $db->paginate(2, 10);</code></pre>



    <h2 class="mt-4">ğŸ§¹ CLEAR</h2>
    <p>LÃ¶scht alle Tabellen (JSON-Dateien) im aktuell gewÃ¤hlten Datenbankverzeichnis:</p>
    <pre><code class="language-php">$db->clear();</code></pre>


    <h2 class="mt-4">ğŸ” DESCRIBE</h2>
    <p>Zeigt die vermutete Feldstruktur und Typen einer JSON-Tabelle:</p>
    <pre><code class="language-php">$info = $db->from('users')->describe();
    print_r($info);</code></pre>
    <p>Beispielausgabe:</p>
    <pre><code class="language-php">Array
    (
        [id] => integer
        [name] => string
        [email] => string
        [active] => boolean
    )</code></pre>
    <p><strong>Hinweis:</strong> Die Typen basieren auf der <em>ersten Datenzeile</em> in der Tabelle. JSON kennt keine festen Typen, daher ist dies nur eine AnnÃ¤herung.</p>



    <h2 class="mt-4">ğŸ“‚ LIST TABLES</h2>
    <p>Listet alle Tabellen im aktuell gewÃ¤hlten Datenbankverzeichnis auf:</p>
    <pre><code class="language-php">$tabellen = $db->listTables();
    print_r($tabellen);</code></pre>
    <p>Ausgabe:</p>
    <pre><code class="language-php">Array
    (
        [0] => users
        [1] => orders
        [2] => categories
    )</code></pre>
    <p><strong>Hinweis:</strong> Gibt alle vorhandenen <code>.json</code>-Dateien zurÃ¼ck (ohne Endung).</p>
    












    <h2 class="mt-5">ğŸ“¦ Beispielanwendungen</h2>
    <p>Einige praktische Anwendungsbeispiele aus typischen Admin-OberflÃ¤chen oder Backend-Logiken:</p>

    <div class="code-block">
      <h5>ğŸ‘¥ Benutzer aus Berlin mit E-Mail anzeigen</h5>
      <pre><code class="language-php">$users = $db->from('users')
    ->where([['city', '==', 'Berlin']])
    ->select('id,name,email')
    ->get();</code></pre>
    </div>

    <div class="code-block">
      <h5>â• Neuen Benutzer anlegen</h5>
      <pre><code class="language-php">$db->from('users')->insert([
  'id' => 999,
  'name' => 'Julia',
  'email' => 'julia@beispiel.de',
  'active' => true
]);</code></pre>
    </div>

    <div class="code-block">
      <h5>ğŸ“ Benutzer-E-Mail Ã¤ndern</h5>
      <pre><code class="language-php">$db->from('users')
   ->where([['id', '==', 999]])
   ->update(['email' => 'julia.neu@beispiel.de']);</code></pre>
    </div>

    <div class="code-block">
      <h5>ğŸ›’ Bestellungen je Kunde summieren (ab 3 Bestellungen)</h5>
      <pre><code class="language-php">$db->from('orders')
    ->groupBy('customer_id')
    ->having(fn($g) => count($g) >= 3);

$umsatz = $db->sum('total');</code></pre>
    </div>

    <div class="code-block">
      <h5>ğŸ“„ Benutzerliste seitenweise anzeigen</h5>
      <pre><code class="language-php">$users = $db->from('users')
    ->orderBy('name')
    ->paginate(1, 25);</code></pre>
    </div>

    <div class="code-block">
      <h5>âœ… PrÃ¼fung, ob ein Admin existiert</h5>
      <pre><code class="language-php">$adminDa = $db->from('users')
    ->where([['role', '==', 'admin']])
    ->exists();</code></pre>
    </div>

    <h2 class="mt-5">ğŸ”—JOIN Beispiele</h2>
    <div class="bg-white p-3 rounded border">
      <p><strong>ğŸ”„INNER JOIN:</strong> Nur DatensÃ¤tze mit Ãœbereinstimmungen in beiden Tabellen</p>
      <pre><code class="language-php">$db->from('users')
       ->join('orders', 'user_id', 'INNER')
       ->get();</code></pre>
    
      <p><strong>â¬…ï¸ LEFT JOIN:</strong> Alle DatensÃ¤tze aus der linken Tabelle (z.â€¯B. <code>users</code>), passende Daten aus der rechten (z.â€¯B. <code>orders</code>), andernfalls <code>null</code></p>
      <pre><code class="language-php">$db->from('users')
       ->join('orders', 'user_id', 'LEFT')
       ->get();</code></pre>
    
      <p><strong>â¡ï¸ RIGHT JOIN:</strong> Alle DatensÃ¤tze aus der rechten Tabelle (<code>orders</code>), passende Daten aus der linken (<code>users</code>), andernfalls <code>null</code></p>
      <pre><code class="language-php">$db->from('users')
       ->join('orders', 'user_id', 'RIGHT')
       ->get();</code></pre>
    
      <p><strong>ğŸ” FULL OUTER JOIN:</strong> Kombination aus LEFT und RIGHT JOIN. Es werden alle Zeilen aus beiden Tabellen zurÃ¼ckgegeben â€“ verbundene Zeilen zusammengefÃ¼hrt, nicht verbundene ergÃ¤nzt mit <code>null</code>-Feldern.</p>
      <pre><code class="language-php">$db->from('users')
       ->join('orders', 'user_id', 'FULL OUTER')
       ->get();</code></pre>
    
      <hr class="my-4">
    
      <h5>ğŸ§© Kategorie-Zuordnung via Zwischentabelle (artikel2category)</h5>
      <p>Um z.â€¯B. alle Artikel zu finden, die einer bestimmten Kategorie (z.â€¯B. <code>category_id = 1</code>) zugewiesen sind, nutzt du die Zwischentabelle <code>artikel2category</code> als Ausgangspunkt und verknÃ¼pfst sie mit <code>artikel</code>:</p>
      <pre><code class="language-php">$artikel = $db->from('artikel2category')
      ->where([['category_id', '==', 1]])
      ->join('artikel', 'artikel_id', 'INNER')
      ->select('artikel_id,name,preis')
      ->get();</code></pre>
    
      <p><em>Hinweis:</em> Diese Technik ist hilfreich fÃ¼r viele-zu-viele-Beziehungen wie Artikel & Kategorien, Produkte & Tags, Benutzer & Rollen usw.</p>
    </div>
    
<hr>





<h2 class="mt-5">ğŸ§¾ Fazit</h2>
<p>
  JsonSQL ist mehr als nur ein Experiment â€“ es ist ein vollwertiger Datenbank-Handler fÃ¼r strukturierte JSON-Dateien, der SQL-artige Abfragen mit moderner PHP-Syntax vereint. 
</p>
<p>
  Besonders hervorzuheben ist die UnterstÃ¼tzung fÃ¼r <strong>JOINs</strong> (inkl. <code>FULL OUTER</code>), komplexe <strong>Filter- und Sortierlogiken</strong>, sowie Gruppenfunktionen mit <strong>Aggregaten</strong> und <code>having()</code>â€“Klauseln.
</p>
<p>
  Ob als Admin-Tool, Daten-Mockup-System, API-Datenquelle oder Lightweight-Datenbank fÃ¼r lokale Webprojekte: JsonSQL bietet eine einzigartige Kombination aus FlexibilitÃ¤t, Lesbarkeit und Dateibasiertheit â€“ ganz ohne MySQL oder SQLite.
</p>
<p class="fw-bold text-success">
  ğŸ‘‰ So etwas gibt es derzeit <u>nirgendwo</u> in vergleichbarer Form â€“ JsonSQL ist ein echtes Unikat im PHP-Ã–kosystem!
</p>
<p>
  Feedback, Ideen und Pull-Requests sind herzlich willkommen auf GitHub. Viel SpaÃŸ beim Entwickeln mit JsonSQL!
</p>









    <hr>
    <footer class="text-center text-muted mt-5">
      <div class="mb-2">
        <img src="https://teitge.de/JsonSQL/assets/images/JsonSQL-Logo.webp" alt="JsonSQL Logo" style="max-height:40px;">
      </div>
      JsonSQL â€“ entwickelt von Johannes Teitge â€“ GPL Lizenz â€“ johannes@teitge.de
    </footer>
  </div>



</body>
</html>